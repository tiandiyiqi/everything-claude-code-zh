# CPCC Compliance Requirements

China Copyright Protection Center (CPCC) requirements for software copyright registration.

> **依据**：中国版权保护中心《计算机软件著作权登记办法》及官方审查标准

---

## 第一部分：通用要求

### 一、信息一致性

| 项目 | 要求 |
|------|------|
| 软件全称 | 必须与《计算机软件著作权登记申请表》完全一致，不得多字、少字、错字或空格差异 |
| 版本号 | 推荐采用 `V1.0`、`V2.0` 格式，禁止使用 `V1.0.0.1`、`beta`、`测试版`、`2025版` 等非标准形式 |
| 权利人 | 企业申请必须与营业执照名称一致，个人申请必须与身份证姓名一致 |
| 日期逻辑 | 开发完成日期 ≤ 发表日期，且不能填写未来日期 |

### 二、文件格式

- [ ] 所有材料必须提交 **PDF** 格式，单个文件大小不超过 50MB
- [ ] PDF 必须**无加密、无密码保护、无水印**，可正常打开和打印
- [ ] 字体需嵌入 PDF，确保在不同设备上显示不乱码

### 三、页眉与页码（强制要求）

**页眉格式**（正文每页必须包含）：
```
软件全称 版本号        第X页/共Y页
```

**示例**：
```
物托邦图书管理系统 V1.0        第1页/共60页
```

**页码要求**：
- 页码必须连续，且标注总页数（如 `第1页/共60页`、`第2页/共60页`）
- 总页数填写实际提交的总页数（若不足60页，则填实际总页数）

**封面与目录**：
- 封面应包含软件名称、版本号、文档类型（可选），可不设页眉页码
- 目录页可单独用罗马数字编页码或省略页码，但正文从第1页开始连续编号

---

## 第二部分：程序鉴别材料（源程序）规范

### 一、提交要求

- 提交**前连续30页 + 后连续30页**，共 **60 页**
- 源程序总页数不足60页的，提交**全部源程序**

### 二、每页格式

| 项目 | 要求 |
|------|------|
| 纸张 | A4 纵向 |
| 页眉 | 按通用要求（软件全称、版本号、第X页/共Y页） |
| 行数 | 每页**不少于50行有效代码** |

**有效代码定义**：
- 不包括空行、纯注释行（仅含 `//` 或 `/* */` 的行）
- 可适当调整字体（建议五号或小四，等宽字体）和行间距（单倍行距或固定值15磅）以达到行数要求

### 三、代码内容要求

**连续性**：
- 前30页必须从程序开头连续选取
- 后30页必须从程序结尾连续选取
- 若由多个文件组成，按主程序在前、依次拼接，不得跳文件、乱序拼凑

**真实性**：
- 必须是可编译/可运行的真实代码
- 不得全是注释、空行或自动生成代码

**禁止内容**：
- ❌ 他人版权声明（如 `Copyright © 其他公司`）
- ❌ 密码、密钥、Token、个人隐私数据
- ❌ 大量开源示例代码、框架自动生成代码

**注释比例**：
- 注释不宜过多，建议不超过30%
- 且不得包含个人信息（如作者名、公司内部路径）

### 四、例外交存（可选）

符合下列情形之一可申请例外交存：
1. 前30页+后30页，其中机密内容用黑色斜线覆盖（覆盖面积不超过50%）
2. 前10页 + 任意连续50页
3. 目标程序（编译后代码）前30页+后30页 + 源程序任意20页

---

## 第三部分：文档鉴别材料规范

### 一、提交要求

- 提交**前连续30页 + 后连续30页**，共 **60 页**
- 文档总页数不足60页的，提交**全部文档**

### 二、文档类型

任选一种（推荐使用**用户手册**）：
- 用户手册（推荐）
- 操作说明书
- 设计文档
- 需求规格说明书

### 三、每页格式

| 项目 | 要求 |
|------|------|
| 纸张 | A4 纵向 |
| 页眉 | 按通用要求（软件全称、版本号、第X页/共Y页） |
| 文字行数 | 每页**不少于30行文字**（图表页除外） |

**注意**：
- 文字指文档本身的描述文本，不包括截图中的文字
- 图表页（含截图、表格）需配有必要的文字说明，纯图片页无效

### 四、内容结构（推荐）

1. **软件概述**：介绍软件功能、用途
2. **运行环境**：硬件配置、操作系统、依赖软件等
3. **功能模块介绍**：分模块描述功能
4. **操作流程**：结合截图说明操作步骤
5. **界面说明**：对主要界面元素进行解释
6. **版权声明**（可选）

### 五、截图要求

**真实性**：
- 必须是软件**实际运行界面截图**
- 禁止使用原型图、示意图、设计稿、线框图或PS合成界面

**完整性**：
- 桌面端软件：截图需包含完整窗口（标题栏、菜单栏、边框）
- 移动端APP/小程序：截图需包含手机状态栏（电量、时间、信号）

**清晰度**：
- 截图分辨率不低于150dpi
- 文字清晰可辨，无拉伸、模糊、反光、遮挡、水印

**图文对应**：
- 每张截图下方应有文字说明（如"图1 登录界面"）
- 说明操作步骤和功能效果

**合规性**：
- 不得包含个人隐私信息（真实姓名、手机号、账号、地址等），可使用演示数据或马赛克处理
- 不得出现他人商标、版权标识
- 避免涉及金融、支付、医疗、区块链等敏感领域，若确有需要，确保功能描述与实际一致

### 六、图表使用规范（重要）

**架构图/流程图使用限制**：
- ✅ **允许使用**：软件概述章节、设计说明章节
- ❌ **禁止使用**：功能操作页面、用户手册的操作流程章节

**图表与截图的关系**：
- 图表（架构图、流程图、类图等）**只是截图的补充**，不能替代截图
- 功能操作页面**必须使用实际运行界面截图**，禁止用流程图代替

**每页文字要求**：
- 每页必须有 **≥30行文字说明**
- 图表页也需配有必要的文字说明，纯图表页无效
- 文字说明应解释图表内容、操作步骤、功能效果

**示例对比**：

| 章节 | 正确做法 | 错误做法 |
|------|----------|----------|
| 软件概述 | 可使用系统架构图 | - |
| 设计说明 | 可使用流程图、类图 | - |
| 功能操作 | 必须使用实际截图 | ❌ 使用流程图代替截图 |
| 用户手册 | 必须使用实际截图 | ❌ 使用示意图代替截图 |

### 七、文档内容一致性

- 功能描述必须与源代码逻辑对应，不得虚构功能
- 软件名称、LOGO、版本号必须与申请表一致

---

## 第四部分：验证检查清单

### 一、源程序自查

- [ ] 软件全称、版本号与申请表完全一致
- [ ] 每页页眉格式正确（含软件全称、版本号、第X页/共Y页）
- [ ] 页码连续，总页数填写正确
- [ ] 每页有效代码行数 ≥ 50行（空行、纯注释不计）
- [ ] 前30页为程序开头连续部分，后30页为结尾连续部分
- [ ] 无他人版权声明、无敏感信息
- [ ] PDF无加密、无乱码

### 二、文档自查

- [ ] 封面包含软件名称、版本号（可选文档类型）
- [ ] 正文每页页眉格式正确
- [ ] 页码连续，从正文第1页开始
- [ ] 每页文字行数 ≥ 30行（图表页除外，但需有文字说明）
- [ ] 截图均为实际运行界面，清晰、完整
- [ ] 截图含必要文字说明，图文对应
- [ ] 内容描述与软件实际功能一致
- [ ] 无隐私信息、他人版权、敏感内容

### 三、截图专项自查

- [ ] 桌面端截图含完整窗口标题栏
- [ ] 移动端截图含状态栏
- [ ] 截图无模糊、拉伸、水印
- [ ] 至少包含以下界面（建议）：
  - [ ] 启动/登录界面
  - [ ] 主界面
  - [ ] 核心功能界面1
  - [ ] 核心功能界面2
  - [ ] 关于/版本信息界面

---

## 第五部分：常见问题防坑指南

### 1. 信息一致坑

- **名称版本号**：申请表中填写的软件名称、版本号必须与源代码、文档每一页的页眉完全一致（包括大小写、空格）
- **权利人**：企业名称必须与营业执照一致，个人姓名与身份证一致

### 2. 源代码坑

- **行数不足**：调整字体和行间距，确保每页 ≥ 50行有效代码
- **代码不连续**：前30页必须是开头连续，后30页必须是结尾连续，不可跳跃或拼凑
- **他人版权**：删除代码中所有第三方版权声明（如 Copyright 某公司），仅保留自己的版权（可选）
- **代码造假**：不能全是注释或自动生成的模板代码，必须体现独创性

### 3. 文档坑

- **用示意图代替截图**：必须使用真实运行截图，否则直接补正
- **截图不完整**：桌面端要带标题栏，移动端要带状态栏
- **纯图片页**：每页必须有文字说明，纯图片页无效
- **功能不符**：文档描述的功能必须在代码中有对应实现

### 4. 格式坑

- **页眉无总页数**：必须写"第X页/共Y页"，不能只写"第X页"
- **页码不连续**：检查是否有缺页、跳号
- **PDF加密或乱码**：生成后务必用不同设备预览确认

### 5. 申请表填写坑

- **发表状态**：已发表的必须填写发表日期，未发表的不填
- **开发完成日期**：不能晚于发表日期，不能填未来
- **用途描述**：避免使用"人工智能、大数据、支付、医疗、金融"等敏感词，以免触发额外审查

---

## 第六部分：版本号格式验证

### 合法格式

| 格式 | 示例 | 说明 |
|------|------|------|
| V主版本.次版本 | V1.0, V2.0 | ✅ 推荐格式 |
| V主版本.次版本.修订号 | V1.0.0, V2.1.0 | ✅ 可接受格式 |

### 禁止格式

| 格式 | 示例 | 问题 |
|------|------|------|
| 过长版本号 | V1.0.0.1 | ❌ 版本号层级过多 |
| 测试标识 | V1.0-beta, V2.0-alpha | ❌ 包含测试标识 |
| 中文标识 | V1.0测试版, V2.0正式版 | ❌ 包含中文标识 |
| 年份标识 | V2025版, V2025.1 | ❌ 使用年份作为版本号 |

### 验证函数

```javascript
function validateVersion(version) {
  // 合法格式: V1.0, V1.0.0, V2.1.0
  const validPattern = /^V\d+\.\d+(\.\d+)?$/;
  
  // 禁止格式检测
  const invalidPatterns = [
    /beta/i, /alpha/i, /test/i, /测试/, /正式/,
    /\.\d+\.\d+\./, // 超过3段
    /\d{4}版/ // 年份版本
  ];
  
  if (!validPattern.test(version)) {
    return { valid: false, error: "版本号格式不正确，推荐使用 V1.0 或 V1.0.0 格式" };
  }
  
  for (const pattern of invalidPatterns) {
    if (pattern.test(version)) {
      return { valid: false, error: "版本号包含禁止的标识，请使用纯数字版本号" };
    }
  }
  
  return { valid: true };
}
```

---

## 第七部分：敏感信息检测

### 检测类型

| 类型 | 正则模式 | 说明 |
|------|----------|------|
| 密码 | `password\s*[:=]\s*['"][^'"]+['"]` | 检测硬编码密码 |
| 密钥 | `(api[_-]?key|secret[_-]?key)\s*[:=]\s*['"][^'"]+['"]` | 检测API密钥 |
| Token | `(token|auth)\s*[:=]\s*['"][^'"]+['"]` | 检测认证Token |
| 手机号 | `1[3-9]\d{9}` | 检测中国手机号 |
| 身份证 | `\d{17}[\dXx]` | 检测身份证号 |
| 邮箱 | `[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}` | 检测邮箱地址 |
| 版权声明 | `Copyright\s+©?\s*(?!${selfCompany})` | 检测他人版权声明 |

### 处理策略

```javascript
function detectSensitiveInfo(content, selfCompany) {
  const patterns = [
    { name: "密码", pattern: /password\s*[:=]\s*['"][^'"]+['"]/gi, severity: "error" },
    { name: "API密钥", pattern: /(api[_-]?key|secret[_-]?key)\s*[:=]\s*['"][^'"]+['"]/gi, severity: "error" },
    { name: "Token", pattern: /(token|auth)\s*[:=]\s*['"][^'"]+['"]/gi, severity: "error" },
    { name: "手机号", pattern: /1[3-9]\d{9}/g, severity: "warning" },
    { name: "身份证号", pattern: /\d{17}[\dXx]/g, severity: "error" },
    { name: "他人版权", pattern: new RegExp(`Copyright\\s+©?\\s*(?!${selfCompany})`, 'gi'), severity: "error" }
  ];
  
  const findings = [];
  
  for (const { name, pattern, severity } of patterns) {
    const matches = content.match(pattern);
    if (matches) {
      findings.push({ name, count: matches.length, severity, examples: matches.slice(0, 3) });
    }
  }
  
  return findings;
}
```

---

## 第八部分：行数验证

### 文档行数验证

```javascript
function validateDocumentLines(content) {
  const lines = content.split('\n');
  const textLines = lines.filter(line => {
    // 排除空行、纯图表行、纯代码块
    const trimmed = line.trim();
    return trimmed.length > 0 && 
           !trimmed.startsWith('```') &&
           !trimmed.match(/^!\[.*\]\(.*\)$/);
  });
  
  // 估算每页行数（假设每页约40行）
  const pages = Math.ceil(textLines.length / 40);
  const avgLinesPerPage = textLines.length / pages;
  
  return {
    totalLines: textLines.length,
    estimatedPages: pages,
    avgLinesPerPage: Math.round(avgLinesPerPage),
    valid: avgLinesPerPage >= 30
  };
}
```

### 源代码行数验证

```javascript
function validateSourceCodeLines(content) {
  const lines = content.split('\n');
  const effectiveLines = lines.filter(line => {
    const trimmed = line.trim();
    // 排除空行和纯注释行
    return trimmed.length > 0 && 
           !trimmed.startsWith('//') && 
           !trimmed.startsWith('#') &&
           !trimmed.startsWith('/*') &&
           !trimmed.startsWith('*');
  });
  
  // 估算每页行数（假设每页约60行）
  const pages = Math.ceil(effectiveLines.length / 60);
  const avgLinesPerPage = effectiveLines.length / pages;
  
  return {
    totalLines: lines.length,
    effectiveLines: effectiveLines.length,
    estimatedPages: pages,
    avgLinesPerPage: Math.round(avgLinesPerPage),
    valid: avgLinesPerPage >= 50
  };
}
```

---

## 一次通过黄金原则

1. ✅ 名称、版本号全程一模一样
2. ✅ 代码连续、够行、无他人版权
3. ✅ 文档真实截图 + 文字说明 + 够行
4. ✅ 日期、权利人、发表状态逻辑正常
5. ✅ 所有材料PDF清晰、不加密、规范页眉页码

> 本规范结合中国版权保护中心最新要求及常见补正问题编写，请严格遵循。如有疑问，可登录中国版权保护中心官网查询最新指南。
